# NihongoDeOK - フェーズ1（MVP）タスク定義

このドキュメントはNihongoDeOKプロジェクトのフェーズ1（MVP）における最小限の実装タスクを定義します。simonwillison.netの記事を翻訳してXに投稿する基本機能を最速で実現します。

各タスクはPRとして管理し、明確な完了条件を持ちます。拡張性よりも実装スピードを優先します。

## プロジェクト初期設定

### 概要
TypeScriptプロジェクトの基本構造を作成し、必要な設定ファイルとパッケージをインストールします。

### タスクリスト
- [ ] プロジェクトディレクトリ構造の作成
- [ ] package.jsonの初期化
- [ ] TypeScript設定ファイル(tsconfig.json)の作成
- [ ] 必須パッケージのインストール（axios, cheerio, twitter-api-v2, mastra）
- [ ] .env.exampleファイルの作成（必要なAPI鍵の定義）
- [ ] .gitignoreファイルの作成

### 技術要件
- Node.js
- TypeScript
- npm/yarn

### 完了条件
- プロジェクトがTypeScriptでコンパイルできる状態になっている
- 必要なパッケージがインストールされている
- 環境変数の管理方法が確立されている

## クローラー機能実装

### 概要
simonwillison.netから最新記事を取得し、コンテンツを抽出する機能を実装します。

### タスクリスト
- [ ] simonwillison.netのRSSフィードを取得する関数の実装
- [ ] 記事のURLリストを抽出する機能の実装
- [ ] 記事の本文コンテンツを抽出する機能の実装（cheerio活用）
- [ ] クロール済み記事を管理するためのJSONファイル構造の定義
- [ ] 新規記事のみをフィルタリングする機能の実装

### 技術要件
- axios（HTTPリクエスト）
- cheerio（HTML解析）
- fs/promises（JSONファイル操作）

### 完了条件
- simonwillison.netの最新記事を取得できる
- 記事の本文を正確に抽出できる
- クロール済み記事と新規記事を区別できる

## 翻訳エージェント実装

### 概要
Mastraを活用して、記事タイトルと内容を翻訳するエージェントを実装します。

### タスクリスト
- [ ] OpenAI APIまたはAnthropic API接続設定
- [ ] Mastra翻訳エージェントの基本構造定義
- [ ] 効果的な翻訳プロンプトの作成
- [ ] 長文を分割して翻訳する機能の実装
- [ ] 翻訳結果を統合する機能の実装

### 技術要件
- Mastra
- OpenAI API / Anthropic API
- テキスト分割アルゴリズム

### 完了条件
- 記事タイトルと内容が日本語に適切に翻訳される
- 長い記事も分割処理によって翻訳できる
- 技術用語が適切に翻訳される

## X投稿機能実装

### 概要
翻訳済み記事をX（旧Twitter）に投稿する機能を実装します。

### タスクリスト
- [ ] X API認証の実装
- [ ] 翻訳済みコンテンツをX形式に整形する機能の実装
- [ ] 文字数制限に対応した分割投稿機能の実装
- [ ] スレッド形式での連続投稿の実装
- [ ] 投稿結果の確認・エラーハンドリング

### 技術要件
- twitter-api-v2
- OAuth認証

### 完了条件
- 翻訳済み記事がX上に正しく投稿される
- 長い記事もスレッド形式で適切に分割投稿される
- 投稿エラー時の基本的なハンドリングができる

## メインワークフロー実装

### 概要
クロール、翻訳、投稿の一連の流れを統合し、コマンドラインから実行できるようにします。

### タスクリスト
- [ ] 各コンポーネントを統合するメイン関数の実装
- [ ] コマンドライン引数の処理機能の実装
- [ ] 基本的なエラーハンドリングとログ出力の実装
- [ ] 定期実行のためのスクリプト作成（cron等と連携可能な形式）

### 技術要件
- コマンドライン引数処理
- エラーハンドリング
- ロギング

### 完了条件
- コマンド一つで全プロセス（クロール→翻訳→投稿）が実行できる
- 基本的なエラー状況に対応できる
- 実行結果がログとして出力される

## 動作検証とドキュメント作成

### 概要
全体の動作を検証し、使用方法や設定方法を記載したドキュメントを作成します。

### タスクリスト
- [ ] エンドツーエンドのテスト実行と結果確認
- [ ] 翻訳品質の確認と必要に応じたプロンプト調整
- [ ] README.mdの作成（セットアップ手順、使用方法）
- [ ] トラブルシューティングセクションの作成
- [ ] 将来の拡張計画の簡単な記載

### 技術要件
- マークダウン
- テスト検証環境

### 完了条件
- 一連の流れが実際に動作することが確認できている
- ドキュメントが整備され、初めてのユーザーでもセットアップできる
- 基本的なトラブルシューティングが文書化されている

## 注意事項

- このタスクリストは最小限の機能実装に絞っています
- エラーハンドリングは基本的なものに限定します
- 複雑な機能は将来のフェーズに回します
- 拡張性よりも迅速な実装を優先します
- ローカル環境(Mac)でのみの実行を想定します 