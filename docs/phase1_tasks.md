# NihongoDeOK - フェーズ1（MVP）タスク

このドキュメントはNihongoDeOKプロジェクトのフェーズ1（MVP）における実装タスクを定義します。フェーズ1では、simonwillison.netの記事をクロールして翻訳し、X（旧Twitter）にポストする基本機能をローカル環境(Mac)で実行できるようにします。

## 1. プロジェクト初期設定

- [ ] 1.1 プロジェクトリポジトリのセットアップ
- [ ] 1.2 基本的なプロジェクト構造の作成（ディレクトリ構成）
- [ ] 1.3 TypeScriptの設定（tsconfig.json）
- [ ] 1.4 必要なパッケージのインストールと package.json の設定
- [ ] 1.5 環境変数管理の仕組みの構築（.env）
- [ ] 1.6 ローカル開発環境向けの実行スクリプトの作成

## 2. クローラーコンポーネント

- [ ] 2.1 simonwillison.netのサイト構造の分析
- [ ] 2.2 記事一覧取得機能の実装
- [ ] 2.3 記事内容取得機能の実装
- [ ] 2.4 HTML解析と構造化データ抽出の実装
- [ ] 2.5 新着記事検出の仕組みの実装
- [ ] 2.6 エラーハンドリング機能の実装
- [ ] 2.7 レート制限対応の実装
- [ ] 2.8 クローラーのインターフェース設計（将来の拡張性を考慮）

## 3. データ保存コンポーネント

- [ ] 3.1 クロール結果の保存構造の設計
- [ ] 3.2 ローカルファイルシステムへの保存機能実装
- [ ] 3.3 記事メタデータの管理機能実装
- [ ] 3.4 処理状態の管理機能実装（クロール済み、翻訳済み、投稿済みなど）
- [ ] 3.5 複数回実行時の差分検出・管理機能

## 4. 翻訳・要約コンポーネント

- [ ] 4.1 LLM APIとの連携機能の実装（OpenAI API等）
- [ ] 4.2 基本的な翻訳プロンプトの設計
- [ ] 4.3 記事内容の分割処理（LLMのコンテキスト長制限対応）
- [ ] 4.4 翻訳結果の結合処理
- [ ] 4.5 技術用語対応の翻訳最適化
- [ ] 4.6 要約生成機能の実装
- [ ] 4.7 コードブロック、引用、リンクなどの特殊要素の適切な処理
- [ ] 4.8 トークン使用量の最適化と管理

## 5. X投稿コンポーネント

- [ ] 5.1 X API連携の設定
- [ ] 5.2 X API認証・アクセストークン管理の実装
- [ ] 5.3 連続ポスト生成機能の実装（文字数制限対応）
- [ ] 5.4 画像付きポスト対応（記事内画像の処理）
- [ ] 5.5 リンク付きポスト対応
- [ ] 5.6 投稿エラーのハンドリング
- [ ] 5.7 投稿状態の記録と再開機能

## 6. オーケストレーター（メインワークフロー）

- [ ] 6.1 全体のワークフロー設計
- [ ] 6.2 コンポーネント間の連携実装
- [ ] 6.3 処理の順序と依存関係の管理
- [ ] 6.4 エラー時のリカバリー処理
- [ ] 6.5 ログ出力機能の実装
- [ ] 6.6 コマンドライン引数による実行オプション管理

## 7. テスト

- [ ] 7.1 ユニットテスト作成（各コンポーネント）
- [ ] 7.2 統合テスト作成（ワークフロー全体）
- [ ] 7.3 モック機能の実装（外部API呼び出しのテスト用）
- [ ] 7.4 テスト用のサンプルデータ作成

## 8. ドキュメント

- [ ] 8.1 システム構成図の作成
- [ ] 8.2 インストール・セットアップ手順の作成
- [ ] 8.3 使用方法の説明ドキュメント作成
- [ ] 8.4 トラブルシューティングガイドの作成
- [ ] 8.5 コード内コメントの充実

## 9. 品質向上・最適化

- [ ] 9.1 翻訳品質のレビューと調整
- [ ] 9.2 エラー処理の強化
- [ ] 9.3 パフォーマンス最適化
- [ ] 9.4 リソース使用量の最適化（APIコスト削減）
- [ ] 9.5 ユーザビリティ向上（実行ログ、進捗表示など）

## 10. リリース準備

- [ ] 10.1 実行環境の要件の文書化
- [ ] 10.2 インストール・実行スクリプトの最終調整
- [ ] 10.3 サンプル実行による検証
- [ ] 10.4 既知の制限事項のドキュメント化
- [ ] 10.5 フェーズ1完了レポート作成

## 注意事項

- 各タスクは、AIコーディングエージェントが実行可能な粒度に分解されています
- タスクは順番に依存関係がありますが、一部は並行して進めることも可能です
- 各コンポーネントは将来的な拡張を考慮したインターフェース設計を行ってください
- フェーズ1ではsimonwillison.netのみに対応し、複数ブログ対応は将来フェーズでの実装とします
- ローカル環境(Mac)での実行に最適化していますが、将来的なCloudflare環境への移行も意識した設計としてください 